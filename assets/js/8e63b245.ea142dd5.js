"use strict";(self.webpackChunkapigear=self.webpackChunkapigear||[]).push([[3444],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=o,g=d["".concat(c,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(g,i(i({ref:t},p),{},{components:n})):r.createElement(g,i({ref:t},p))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1865:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:5},i="Property Synchronization",l={unversionedId:"advanced/objectlink/properties",id:"advanced/objectlink/properties",title:"Property Synchronization",description:"An object can contain a set of properties, which describe the data associated with the object. When a property changes, either locally or remote all linked objecta re notified about the changes and updated.",source:"@site/docs/advanced/objectlink/properties.md",sourceDirName:"advanced/objectlink",slug:"/advanced/objectlink/properties",permalink:"/docs/advanced/objectlink/properties",draft:!1,editUrl:"https://github.com/apigear-io/apigear-docs/edit/main/docs/advanced/objectlink/properties.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"docsSidebar",previous:{title:"Method Invokation",permalink:"/docs/advanced/objectlink/methods"},next:{title:"Server Side Signals",permalink:"/docs/advanced/objectlink/signals"}},c={},s=[{value:"ApiGear Object Model",id:"apigear-object-model",level:2},{value:"Protocol Flow",id:"protocol-flow",level:2},{value:"Sequence Diagram",id:"sequence-diagram",level:2}],p={toc:s};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"property-synchronization"},"Property Synchronization"),(0,o.kt)("p",null,"An object can contain a set of properties, which describe the data associated with the object. When a property changes, either locally or remote all linked objecta re notified about the changes and updated."),(0,o.kt)("p",null,"This allows to distribute data across all linked objects easily and share state between local and remote objects."),(0,o.kt)("h2",{id:"apigear-object-model"},"ApiGear Object Model"),(0,o.kt)("p",null,"In ApiGear properties are described as properties inside an interface."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"name: org.demos\n\ninterfaces:\n  - name: Echo\n    properties:\n      - name: message\n        type: string\n")),(0,o.kt)("p",null,"The resulting simplified typescript code could look like this."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// org.demos.js\nclass Echo {\n  message: string = ""\n}\nconst echo = new Echo()\necho.message = "foo"\n')),(0,o.kt)("h2",{id:"protocol-flow"},"Protocol Flow"),(0,o.kt)("p",null,"First the local object needs to be linked to a remote object."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'--\x3e [ LINK, "org.demos.Echo"]\n')),(0,o.kt)("p",null,"Now the local object receive initial property list, which is automatically send after the link message."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"<-- [ INIT, 'org.demos.Echo', { message: \"hello\" } ]\n")),(0,o.kt)("p",null,"After the init message out local object is fully populated and all properties have valid values."),(0,o.kt)("p",null,'When a property is changed on the local object, for example from "hello" to "foo", a ',(0,o.kt)("inlineCode",{parentName:"p"},"SET_PROPERTY")," message is send."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'--\x3e [ SET_PROPERTY, "org.demos.Echo/message", "foo"]\n')),(0,o.kt)("p",null,"The remote object will then set the property and notify all linked objects about the changes using a ",(0,o.kt)("inlineCode",{parentName:"p"},"PROPERTY_CHANGE")," message, including the original sender."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'<-- [ PROPERTY_CHANGE, "org.demos.Echo/message", "foo"]\n')),(0,o.kt)("h2",{id:"sequence-diagram"},"Sequence Diagram"),(0,o.kt)("p",null,"After an object is linked propertie will be synced across all linked clients."),(0,o.kt)("mermaid",{value:"sequenceDiagram\nSink->Source: [SET_PROPERTY:int, PropertyId:string, Value:json]\nSource->Sink: [PROPERTY_CHANGED:int, PropertyId:string, Value:json]"}))}d.isMDXComponent=!0}}]);