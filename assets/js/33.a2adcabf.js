(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{311:function(e,t,o){"use strict";o.r(t);var v=o(10),_=Object(v.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"protocol"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#protocol"}},[e._v("#")]),e._v(" Protocol")]),e._v(" "),t("p",[e._v("ObjectLink is an IPC protocol based on the idea to link a local object to a remote object a network connection. Object link allows users to communicate state full objects over a network connection. The protocol is designed to be used with the "),t("a",{attrs:{href:"../objectapi"}},[e._v("ObjectAPI")]),e._v(" specification.")]),e._v(" "),t("p",[e._v("The design is based on several main concepts:")]),e._v(" "),t("ul",[t("li",[e._v("Properties are reactive and synchronized between the local and remote object")]),e._v(" "),t("li",[e._v("Operations allows a request/response communication between the local and remote object")]),e._v(" "),t("li",[e._v("Signals are used to notify the local object about events on the remote object")]),e._v(" "),t("li",[e._v("Modules are used to group objects and to define a namespace")]),e._v(" "),t("li",[e._v("The local and remove object a represented by an easy to use object API surface")]),e._v(" "),t("li",[e._v("The object API surface can be defined by an ObjectAPI document")])]),e._v(" "),t("h2",{attrs:{id:"json-notation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json-notation"}},[e._v("#")]),e._v(" JSON Notation")]),e._v(" "),t("p",[e._v("Throughout the protocol description, the JSON notation is used. All data types must be valid JSON data types.")]),e._v(" "),t("p",[e._v("For transport several protocols are supported, see list below:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.json.org/json-en.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSON"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://msgpack.org/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("MsgPack"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://cbor.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("CBOR"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("The client and server needs to know their transport and encoding in advance. There is no protocol negotiation designed. This allows us to keep the protocol simple.")]),e._v(" "),t("h2",{attrs:{id:"message-types"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#message-types"}},[e._v("#")]),e._v(" Message Types")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"lifecycle"}},[e._v("Lifecycle")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("--\x3e LINK")]),e._v(" - link the local object with a remote object")]),e._v(" "),t("li",[t("code",[e._v("<-- INIT")]),e._v(" - initialized the local object with properties from the remote object")]),e._v(" "),t("li",[t("code",[e._v("--\x3e UNLINK")]),e._v(" - unlinks a local object from a remote object")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"properties"}},[e._v("Properties")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("--\x3e SET_PROPERTY")]),e._v(" - send a property change to a remote object")]),e._v(" "),t("li",[t("code",[e._v("<-- PROPERTY_CHANGE")]),e._v(" - sends property changes to all linked client objects")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"methods"}},[e._v("Methods")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("--\x3e INVOKE")]),e._v(" - invoke a method on a remote object")]),e._v(" "),t("li",[t("code",[e._v("<-- INVOKE_REPLY")]),e._v(" - reply of an remote invokation")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"signals"}},[e._v("Signals")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("<-- SIGNAL")]),e._v(" - send remote events back to all linked client objects")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"errors"}},[e._v("Errors")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("<-- ERROR")]),e._v(" - send an error back to the client with the msg type of the original message")])])])]),e._v(" "),t("h2",{attrs:{id:"message-formats"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#message-formats"}},[e._v("#")]),e._v(" Message Formats")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Direction")]),e._v(" "),t("th",[e._v("Message")]),e._v(" "),t("th",[e._v("Value")]),e._v(" "),t("th",[e._v("Format")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("code",[e._v("->")])]),e._v(" "),t("td",[t("code",[e._v("LINK")])]),e._v(" "),t("td",[e._v("10")]),e._v(" "),t("td",[e._v("[ MsgType, ObjectId ]")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("<-")])]),e._v(" "),t("td",[t("code",[e._v("INIT")])]),e._v(" "),t("td",[e._v("11")]),e._v(" "),t("td",[e._v("[ MsgType, ObjectId, Dict ]")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("->")])]),e._v(" "),t("td",[t("code",[e._v("UNLINK")])]),e._v(" "),t("td",[e._v("12")]),e._v(" "),t("td",[e._v("[ MsgType, ObjectId ]")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("->")])]),e._v(" "),t("td",[t("code",[e._v("SET_PROPERTY")])]),e._v(" "),t("td",[e._v("20")]),e._v(" "),t("td",[e._v("[ MsgType, PropertyId, Value ]")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("<-")])]),e._v(" "),t("td",[t("code",[e._v("PROPERTY_CHANGE")])]),e._v(" "),t("td",[e._v("21")]),e._v(" "),t("td",[e._v("[ MsgType, ObjectId, Value ]")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("->")])]),e._v(" "),t("td",[t("code",[e._v("INVOKE")])]),e._v(" "),t("td",[e._v("30")]),e._v(" "),t("td",[e._v("[ MsgType, RequestID, MethodId, Args ]")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("<-")])]),e._v(" "),t("td",[t("code",[e._v("INVOKE_REPLY")])]),e._v(" "),t("td",[e._v("31")]),e._v(" "),t("td",[e._v("[ MsgType, RequestID, Value ]")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("<-")])]),e._v(" "),t("td",[t("code",[e._v("SIGNAL")])]),e._v(" "),t("td",[e._v("40")]),e._v(" "),t("td",[e._v("[ MsgType, SignalId, Args ]")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("<-")])]),e._v(" "),t("td",[t("code",[e._v("ERROR")])]),e._v(" "),t("td",[e._v("50")]),e._v(" "),t("td",[e._v("[ MsgType, MsgType, RequestID, Error ]")])])])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("MsgType")]),e._v(": integer value of message type")]),e._v(" "),t("li",[t("code",[e._v("ObjectId")]),e._v(": a string identifying the resource as module and object name (e.g. "),t("code",[e._v('"demo.Calc"')]),e._v(")")]),e._v(" "),t("li",[t("code",[e._v("Dict")]),e._v(": A JSON dictionary, e.g. "),t("code",[e._v('{ "count": 0}')])]),e._v(" "),t("li",[t("code",[e._v("Args")]),e._v(": A JSON array, e.g. "),t("code",[e._v("[ 1, 2 ]")])]),e._v(" "),t("li",[t("code",[e._v("PropertyId")]),e._v(": A ObjectID with a property path (e.g. "),t("code",[e._v('"demo.Calc/count"')]),e._v(")")]),e._v(" "),t("li",[t("code",[e._v("Value")]),e._v(": Any valid JSON value including JSON arrays or objects")]),e._v(" "),t("li",[t("code",[e._v("MethodId")]),e._v(": A ObjectID with a method path (e.g. "),t("code",[e._v('"demo.Calc/increment"')]),e._v(")")]),e._v(" "),t("li",[t("code",[e._v("RequestId")]),e._v(": A unique integer value identifying the request during the connection. Typically a value incremented by one on each request and starting by 1 and then reset to 1 by max value.")]),e._v(" "),t("li",[t("code",[e._v("SignalId")]),e._v(": A ObjectID with a signal path (e.g. "),t("code",[e._v('"demo.Calc/shutdown"')]),e._v(")")]),e._v(" "),t("li",[t("code",[e._v("Error")]),e._v(": A string describing the error")])])])}),[],!1,null,null,null);t.default=_.exports}}]);